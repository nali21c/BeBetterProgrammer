## 7 똥통에서 뒹굴기
훌륭한 프로그래머는 어떻게 험란한 코드에 품위있게 접근할까?

##### 7.1 똥냄새 맡기
훌륭한 코드는 순수 예술이나 한 편의 시와 같다. 하지만 슬프게도 항상 그런 것만은 아니다.

##### 7.1 똥통 헤치고 나아가기
더러운 코드를 만들게 된 이유부터 냉정하게 분석해야 한다. 자신이 선호하는 스타일대로 만드어지지 않았다는 이유로 새로운 코드를 작성하는 것은 쉽다.
그런데 정말 끔찍할까? 충분히 살펴보기 전까지는 코드나 코드를 작성한 사람에 대해 경솔한 판단을 내려서는 안된다.


개인적 이유로 판단하지 말아라.

나쁜 코드를 일부러 짜는 사람은 없다. 심지어 자신이 짠 코드라도 완벽하길 기대해서는 안된다.

나쁜 코드를 만났을 때 느껴지는 나쁜 감정을 느끼지 말고 어떻게 나아지게 만들지 찾아라.

##### 7.3 똥통 조사 결과
* 외부에 노출하는 API는 깔끔하고 합리적인가?
* 자료형을 잘 고르고, 변수 명을 적절히?
* 코드의 레이아웃 정돈
* 코드베이스 전반의 제어구조
* 특정 기능을 구현하는 코드를 쉽게 찾을 수 있는가?

많은 버그가 발견 되었다는 것은 그 영역의 코드 품질이 좋지 않다는 것이다.

##### 7.4 수렁에서 일하기
헤어나기 어려운 늦이나 다름없는 코드를 찾아냈다면, 긴급 상황에 처한 것이다. 전략이 필요하다.

* 나쁜 코드를 고쳐야만 할까?
* 현재의 문제를 해결할 최소한의 수정만 해야하나?
* 괴사 부위를 도려내고, 새롭고 더 나은 코드로 바꿔야 할까?

시간이 없다면 전체를 뒤엎으려 하지 말라. 시간을 지혜롭게 쓰라. 
별다른 수정 없이도 몇 년 동안 적절히 작동하였다면, 지금 수정하는 것은 적절하지 않을 수 있다.
이후에 훨씬 더 많은 부분을 수정해야 할 수도 있다.
점진적으로 수정해나가면서 코드르 개선할 수 있다.

##### 7.5 똥 치우기
캠핑 지역은 항상 캠핑 전보다 더 깨끗하게 정리하고 떠나자.
**어떤 코드를 건드리든 이전보다 나아지도록 하자**
간단한 수정이라도 좋으니 코드 외관을 정리하라. 변수명 변경, 거대한 함수는 더 작으면서도 적절히 명명된 작은 함수들로 나누라.
주기적으로 코드 일부라도 확인하고 그때마다 조금씩 나아지게 만든다면, 좋은 결과물을 만들어낸다.

##### 7.6 수정하기
**코드 수정은 천천히, 주의깊게. 한번에 하나씩**

* 기능을 변경하면 레이아웃 변경 금지 - 일일이 나누어 커밋
* 수정으로 인해 기존 기능에 문제가 생기지 않음을 보장할 수 있는 모든 수단을 사용. 신뢰할 만한 자동화 도구 사용.
* 목표에 효과적으로 도달하려면 적잘한 단위 테스트들로 코드를 충분히 둘러싸야 한다. 문제 코드 주변이 깨끗하다면 테스트 코드를 먼저 작성하는 것에 대해 고려하라.
* 코드를 감싼 API를 수정하되 내부 로직을 직접 수정하지 말라. 적절한 명칭과 매개 변수 타입, 순서를 가지도록 수정. 기존 API를 통해 새로운 외부 인터페이스를 작성 후, 내부 구조를 변경할 때 이 인터페이스의 내부도 변경하면 된다.

소스 관리 도구를 믿고 수정하라. 실수하더라도 다시 되돌리고 수정하라. 이는 낭비가 아니다. 이를 통해 코드 그 자체나 코드의 변경 가능성에 대해 알 수 있다.

때로는 코드를 갈아치우기 위해 과감하게 삭제할 수도 있다. 위험할 수 있지만 스스로 감내해야 한다. 
적잘한 개선 방향을 찾으려면 때로는 시야를 바꿔야 하낟.

##### 7.7 나쁜 코드? 나쁜 프로그래머?
코드에 비난을 퍼붓는건 도움이 되지 않는다. 일부러 잘못된 코드를 작성하려는 사람은 거의 없기 때문이다.
가능하다면 코드를 변경할 기회를 즐기라. 연습이라 생각해도 된다. 어떻게 하면 똑같은 실수를 반복하지 않을까?
중요한 것은 항상 자만하지 말라.

##### 7.8 마치며

## 8 오류 무시하지 않기
솔직히 말하면 그냥 넘길수도 있다. 이는 나중에 더 큰 부작용을 만든다. 만약을 대비해 항상 유심히 확인하고 검토.

  